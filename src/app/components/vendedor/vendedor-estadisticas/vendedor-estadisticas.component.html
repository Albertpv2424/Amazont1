<div class="estadisticas-container">
  <h2>Estadísticas de Ventas</h2>

  <!-- Loading state -->
  <div *ngIf="cargando" class="loading-state">
    <div class="spinner"></div>
    <p>Cargando estadísticas...</p>
  </div>

  <!-- Error state -->
  <div *ngIf="error && !cargando" class="error-state">
    <p>{{ error }}</p>
    <button (click)="cargarEstadisticas()">Reintentar</button>
  </div>

  <!-- Statistics content -->
  <div *ngIf="!cargando && !error" class="estadisticas-content">
    <div class="stats-card">
      <h3>Ventas Totales</h3>
      <p class="stat-value">{{ estadisticas.ventasTotales || 0 | currency:'EUR' }}</p>
    </div>

    <div class="stats-card">
      <h3>Productos Vendidos</h3>
      <p class="stat-value">{{ estadisticas.productosVendidos || 0 }}</p>
    </div>

    <div class="stats-card">
      <h3>Pedidos Completados</h3>
      <p class="stat-value">{{ estadisticas.pedidosCompletados || 0 }}</p>
    </div>

    <div class="stats-card">
      <h3>Valoración Media</h3>
      <p class="stat-value">{{ estadisticas.valoracionMedia || 0 }}/5</p>
    </div>

    <!-- Top products section -->
    <div class="top-products" *ngIf="estadisticas.productosPopulares?.length">
      <h3>Productos Más Vendidos</h3>
      <table>
        <thead>
          <tr>
            <th>Producto</th>
            <th>Unidades</th>
            <th>Ingresos</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let producto of estadisticas.productosPopulares">
            <td>{{ producto.nombre }}</td>
            <td>{{ producto.unidades }}</td>
            <td>{{ producto.ingresos | currency:'EUR' }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>