<div class="productos-container">
  <h2>Mis Productos</h2>

  <!-- Loading state -->
  <div *ngIf="cargando" class="loading-state">
    <div class="spinner"></div>
    <p>Cargando productos...</p>
  </div>

  <!-- Error state -->
  <div *ngIf="error && !cargando" class="error-state">
    <p>{{ error }}</p>
    <button (click)="cargarProductos()">Reintentar</button>
  </div>

  <!-- Empty state -->
  <div *ngIf="!cargando && !error && productos.length === 0" class="empty-state">
    <p>No tienes productos publicados.</p>
    <p>¡Comienza a vender añadiendo tu primer producto!</p>
  </div>

  <!-- Products list -->
  <div *ngIf="!cargando && !error && productos.length > 0" class="productos-list">
    <table>
      <thead>
        <tr>
          <th>Imagen</th>
          <th>Nombre</th>
          <th>Precio</th>
          <th>Stock</th>
          <th>Estado</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let producto of productos">
          <td class="producto-imagen">
            <img [src]="producto.imagen" [alt]="producto.nombre || producto.titulo">
          </td>
          <td>{{ producto.nombre || producto.titulo }}</td>
          <td>{{ producto.precio | currency:'EUR' }}</td>
          <td>
            <span [ngClass]="{'stock-low': producto.stock < 10, 'stock-out': producto.stock === 0}">
              {{ producto.stock }}
            </span>
          </td>
          <td>
            <span class="estado" [ngClass]="{'activo': producto.stock > 0, 'inactivo': producto.stock === 0}">
              {{ producto.stock > 0 ? 'Activo' : 'Agotado' }}
            </span>
          </td>
          <td class="acciones">
            <button class="btn-editar" (click)="onEditarProducto(producto)">
              Editar
            </button>
            <button class="btn-eliminar" (click)="onEliminarProducto(producto.id!)">
              Eliminar
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>