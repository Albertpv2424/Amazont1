<div class="productos-container">
  <div class="header">
    <h1>Els Meus Productes</h1>
    <button class="btn-crear" [routerLink]="['/vendedor/productos/crear']">Crear Nou Producte</button>
  </div>

  <div *ngIf="error" class="error-message">
    {{ error }}
  </div>

  <div *ngIf="isLoading" class="loading">
    Carregant productes...
  </div>

  <div *ngIf="!isLoading && !error && productos.length === 0" class="no-productos">
    No tens cap producte. Comença creant-ne un!
  </div>

  <div *ngIf="!isLoading && !error && productos.length > 0" class="productos-list">
    <table>
      <thead>
        <tr>
          <th>Imatge</th>
          <th>Nom</th>
          <th>Preu</th>
          <th>Stock</th>
          <th>Categoria</th>
          <th>Accions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let producto of productos">
          <td>
            <img [src]="producto.imagen || 'assets/images/no-image.png'" alt="{{ producto.nombre }}" class="producto-imagen">
          </td>
          <td>{{ producto.nombre }}</td>
          <td>{{ producto.precio | currency:'EUR' }}</td>
          <td>{{ producto.stock || 'No disponible' }}</td>
          <td>{{ producto.categoria }}</td>
          <td class="acciones">
            <button class="btn-editar" (click)="abrirModalEditar(producto)">Editar</button>
            <button class="btn-eliminar" (click)="producto.id !== undefined && eliminarProducto(producto.id)">Eliminar</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Modal de Edición -->
  <div class="modal-overlay" *ngIf="mostrarModal">
    <div class="modal-container">
      <div class="modal-header">
        <h2>Editar Producto</h2>
        <button class="btn-cerrar" (click)="cerrarModal()">×</button>
      </div>
      <div class="modal-body" *ngIf="productoEditando">
        <form (submit)="guardarCambios()">
          <div class="form-group">
            <label for="nombre">Nombre:</label>
            <input type="text" id="nombre" [(ngModel)]="productoEditando.nombre" name="nombre" required>
          </div>
          
          <div class="form-group">
            <label for="precio">Precio (€):</label>
            <input type="number" id="precio" [(ngModel)]="productoEditando.precio" name="precio" step="0.01" required>
          </div>
          
          <div class="form-group">
            <label for="stock">Stock:</label>
            <input type="number" id="stock" [(ngModel)]="productoEditando.stock" name="stock" required>
          </div>
          
          <div class="form-group">
            <label for="categoria">Categoría:</label>
            <input type="text" id="categoria" [(ngModel)]="productoEditando.categoria" name="categoria" required>
          </div>
          
          <div class="form-group">
            <label for="imagen">URL de la imagen:</label>
            <input type="text" id="imagen" [(ngModel)]="productoEditando.imagen" name="imagen">
          </div>
          
          <div class="form-buttons">
            <button type="button" class="btn-cancelar" (click)="cerrarModal()">Cancelar</button>
            <button type="submit" class="btn-guardar">Guardar Cambios</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>