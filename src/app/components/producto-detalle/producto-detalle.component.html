<div [ngClass]="{'dark-mode': isDarkMode}">
  @if (producto) {
    <div class="producto-detalle">
      <div class="imagen-principal">
        <img [src]="producto.imagen" alt="{{ producto.nombre }}">
      </div>
      <div class="galeria-imagenes">
        @for (imagen of producto.galeriaImagenes; track imagen) {
          <img [src]="imagen" alt="{{ producto.nombre }}">
        }
      </div>
      <h1>{{ producto.nombre }}</h1>
      <p>{{ producto.descripcion }}</p>
      <p class="precio">Precio: {{ producto.precio | currency:'EUR' }}</p>
      <p class="popularidad">Popularidad: {{ producto.popularidad }} ⭐</p>
      
      <div class="cantidad-control">
        <label>Cantidad:</label>
        <div class="cantidad-botones">
          <button (click)="decrementarCantidad()">-</button>
          <span>{{ cantidad }}</span>
          <button (click)="incrementarCantidad()">+</button>
        </div>
      </div>
      
      <button (click)="anadirAlCarrito()">Añadir al carrito</button>
      
      <div class="opiniones">
        <h2>Opiniones</h2>
        @for (opinion of producto.opiniones; track opinion) {
          <div class="opinion">
            <p>{{ opinion.usuario }}: {{ opinion.comentario }}</p>
            <p>Valoración: {{ opinion.valoracion }}</p>
          </div>
        }
      </div>
    </div>
  }
</div>